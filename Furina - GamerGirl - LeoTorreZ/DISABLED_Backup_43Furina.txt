; Furina

; Constants -------------------------

[Constants]
global $active = 0
global $creditinfo = 0
global $ponytailActive = 0

[Present]
post $active = 0
post $ponytailActive = 0
run = CommandListCreditInfo

; Overrides -------------------------

[TextureOverrideFurinaPosition]
hash = 8294fe98
vb0 = ResourceFurinaPosition
$active = 1

[TextureOverrideFurinaBlend]
hash = d8c43862
vb1 = ResourceFurinaBlend
handling = skip
draw = 25000,0 

[TextureOverrideFurinaTexcoord]
hash = a327ea5e
vb1 = ResourceFurinaTexcoord

[TextureOverrideFurinaVertexLimitRaise]
hash = 0f1c8e27

[TextureOverrideFurinaPonytailPosition]
hash = 2a47d8de
vb0 = ResourceFurinaPonytailPosition
$ponytailActive = 1

[TextureOverrideFurinaPonytailBlend]
hash = e4a4630a
vb1 = ResourceFurinaPonytailBlend
handling = skip
draw = 1164,0 

[TextureOverrideFurinaPonytailTexcoord]
hash = a72fe835
vb1 = ResourceFurinaPonytailTexcoord

[TextureOverrideFurinaPonytailVertexLimitRaise]
hash = 12c26e65

[TextureOverrideFurinaIB]
hash = 3c8a32d4
handling = skip

[TextureOverrideFurinaHead]
hash = 3c8a32d4
match_first_index = 0
ib = ResourceFurinaHeadIB
if $ponytailActive == 0
	ps-t1 = ResourceFurinaHeadDiffuse
endif
drawindexed = auto

[TextureOverrideFurinaBody]
hash = 3c8a32d4
match_first_index = 57279
ib = ResourceFurinaBodyIB
ps-t0 = ResourceFurinaBodyNormalMap
if $ponytailActive == 0
	ps-t1 = ResourceFurinaBodyDiffuse2
else
	ps-t1 = ResourceFurinaBodyDiffuse
endif
ps-t2 = ResourceFurinaBodyLightMap
ps-t5 = ResourceFurinaBodyShadowRamp
run = CommandList\global\ORFix\ORFix
drawindexed = auto

[TextureOverrideFurinaDress]
hash = 3c8a32d4
match_first_index = 73413
ib = ResourceFurinaDressIB
ps-t0 = ResourceFurinaBodyDiffuse
ps-t1 = ResourceFurinaBodyLightMap
run = CustomShaderTransparency

[TextureOverrideFurinaPonytailIB]
hash = 5e4f8d68
;hash = 669be7b7
handling = skip
drawindexed = auto

[TextureOverrideFurinaPonytailHead]
hash = 5e4f8d68
;hash = 669be7b7
match_first_index = 0
ib = ResourceFurinaPonytailHeadIB
drawindexed = auto

[TextureOverrideFurinaFace]
hash = e6f05166
if $ponytailActive == 0
	ps-t0 = ResourceFurinaFaceDiffuse2
endif

; CommandList -----------------------

[CommandListCreditInfo]
if $creditinfo == 0 && $active == 1
	pre Resource\ShaderFixes\help.ini\Notification = ResourceCreditInfo
	pre run = CustomShader\ShaderFixes\help.ini\FormatText
	pre $\ShaderFixes\help.ini\notification_timeout = time + 5.0
	$creditinfo = 1
endif

; Resources -------------------------

[ResourceFurinaPosition]
type = Buffer
stride = 40
filename = FurinaPosition.buf

[ResourceFurinaBlend]
type = Buffer
stride = 32
filename = FurinaBlend.buf

[ResourceFurinaTexcoord]
type = Buffer
stride = 20
filename = FurinaTexcoord.buf

[ResourceFurinaPonytailPosition]
type = Buffer
stride = 40
filename = FurinaPonytailPosition.buf

[ResourceFurinaPonytailBlend]
type = Buffer
stride = 32
filename = FurinaPonytailBlend.buf

[ResourceFurinaPonytailTexcoord]
type = Buffer
stride = 12
filename = FurinaPonytailTexcoord.buf

[ResourceFurinaHeadIB]
type = Buffer
format = DXGI_FORMAT_R32_UINT
filename = FurinaHead.ib

[ResourceFurinaBodyIB]
type = Buffer
format = DXGI_FORMAT_R32_UINT
filename = FurinaBody.ib

[ResourceFurinaDressIB]
type = Buffer
format = DXGI_FORMAT_R32_UINT
filename = FurinaDress.ib

[ResourceFurinaPonytailHeadIB]
type = Buffer
format = DXGI_FORMAT_R32_UINT
filename = FurinaPonytailHead.ib

[ResourceFurinaHeadDiffuse]
filename = FurinaHeadDiffuse.dds

[ResourceFurinaBodyNormalMap]
filename = FurinaBodyNormalMap.dds

[ResourceFurinaBodyDiffuse]
filename = FurinaBodyDiffuse.dds

[ResourceFurinaBodyDiffuse2]
filename = FurinaBodyDiffuse2.dds

[ResourceFurinaBodyLightMap]
filename = FurinaBodyLightMap.dds

[ResourceFurinaFaceDiffuse2]
filename = FurinaFaceDiffuse2.dds

[ResourceFurinaBodyShadowRamp]
filename = BodyShadowRamp.jpg

[ResourceCreditInfo]
type = Buffer
data = "Created by LeoTorreZ"


[CustomShaderTransparency]
blend = ADD BLEND_FACTOR INV_BLEND_FACTOR
blend_factor[0] = 0.85
blend_factor[1] = 0.85
blend_factor[2] = 0.85
blend_factor[3] = 1
handling = skip
drawindexed = auto

; .ini generated by GIMI (Genshin-Impact-Model-Importer)
; If you have any issues or find any bugs, please open a ticket at https://github.com/SilentNightSound/GI-Model-Importer/issues or contact SilentNightSound#7430 on discord
